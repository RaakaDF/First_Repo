var log = document.querySelector(".chat")

// function appendLog(container, msg, date) {
//     var doScroll = log.scrollTop > log.scrollHeight - log.clientHeight - 1;
//     log.prepend(container); // Prepend the container instead of appending
//     container.append(msg);
//     msg.append(date);
   
//     if (doScroll) {
//         log.scrollTop = log.scrollHeight - log.clientHeight;
//     }
// }

// 
function appendLog(container, msg, date, prepend = false) {
    var doScroll = log.scrollTop > log.scrollHeight - log.clientHeight - 1;
  
    if (prepend) {
      log.prepend(container); // Prepend the container instead of appending
    } else {
      log.appendChild(container); // Append the container
    }
    
    container.appendChild(msg);
    msg.appendChild(date);
    
    if (doScroll) {
      log.scrollTop = log.scrollHeight - log.clientHeight; // Scroll to the bottom of the chatbox
    }
  }
  


// Create messages from data and append to log container
function CreateMessages(data, currId) {
    data.reverse();

    //new addition 
    //log.innerHTML = "";
    
    // Iterate over the data in reverse order
    for (let i = data.length - 1; i >= 0; i--) {
      const { id, sender_id, content, date } = data[i];
  
      // Check if the message with the same ID already exists in the chatbox
      if (document.getElementById(`message-${id}`)) {
        continue; // Skip this message and move to the next iteration
      }
  
      // Create the message elements
      const receiverContainer = document.createElement("div");
      receiverContainer.className = sender_id == currId ? "sender-container" : "receiver-container";
      
      const receiver = document.createElement("div");
      receiver.className = sender_id == currId ? "sender" : "receiver";
      receiver.innerText = content;
  
      const messagedate = document.createElement("div");
      messagedate.className = "chat-time";
      messagedate.innerText = date.slice(0, -3);
  
      // Set a unique ID for each message element
      receiverContainer.id = `message-${id}`;
  
      // Append the message elements to the log container
      appendLog(receiverContainer, receiver, messagedate, true);
      //log.innerHTML = "";

        // Scroll to the bottom of the chat box after adding the new message
        chatBox.scrollTop = chatBox.scrollHeight;
      //firstId = id;
    }
  }
  
// Create users from data and append to users container
function sendMsg(conn, rid, msg, msg_type) {
    console.log("receiver ID from sendmsg:",rid)
    if (!conn) {
        return false;
    }
    console.log("Message input Value:", msg.value);
    if (!msg.value) {
        console.log("No message");
        return false;
    }
    console.log("Sending message to receiver ID:", rid);

    let msgData = {
        id: 0,
        sender_id: 0,
        receiver_id: rid,
        content: msg.value,
        date: '',
        msg_type: msg_type,
        is_typing: false
    }

    conn.send(JSON.stringify(msgData))
    msg.value = "";
    updateUsers()


    console.log("Message sent to receiver ID:", rid);
    //console.log("Message content:", msg.value);
    console.log("Message Data:", msgData.content);
    return false;
};

var chatBox = document.querySelector(".chat");

function OpenChat(rid, conn, data, currId, firstId) {
    document.getElementById('id' + rid).style.fontWeight = "400";

    for (var i = 0; i < unread.length; i++) {
        if (unread[i][0] == rid) {
            unread[i][1] = 0;
        }
    }

    let oldElem = document.querySelector(".send-wrapper");
    let newElem = oldElem.cloneNode(true);
    oldElem.parentNode.replaceChild(newElem, oldElem);

    document.querySelector(".chat-user-username").innerText = allUsers.filter(u => {
        return u.id == rid;
    })[0].username;
    document.querySelector(".chat-wrapper").style.display = "flex";
    var msg = document.getElementById("chat-input");

    log.innerHTML = "";
    

    var typingTimer;
    var typingInterval = 3000;
    var isTyping = false;

    document.querySelector("#chat-input").addEventListener("keydown", function(event) {
        // Add typing listener and send typing notification
        if (event.keyCode !== 13 && !isTyping) { // Ignore the Enter key and if already typing
            console.log("User started typing");
            isTyping = true;
    
            clearTimeout(typingTimer);
            typingTimer = setTimeout(function() {
                if (isTyping) {
                    console.log("User stopped typing");
                    sendTypingStatus(conn, rid, false); // Send typing status as false when stopped typing
                    isTyping = false;
                }
            }, typingInterval);
    
            sendTypingStatus(conn, rid, true); // Send typing status as true when started typing
            console.log("Sending typing status:", true);
        }
    });
    
    // Send message on button click or Enter keypress and fetch new messages
    document.querySelector("#send-btn").addEventListener("click", function() {
        sendMsg(conn, rid, msg, 'msg');
        offset = null;
        console.log("Sending message From button:", msg.value);
        firstId = firstId + 10;
        let resp = getData('http://localhost:8000/message?receiver=' + rid + '&firstId=512' + '&offset=10');
        resp.then(value => {
            console.log("enter resp then =>", value);
            console.log("Enter value", value);
            if (value && value.length > 0) {
                const lastIndex = value.length - 1;
                firstId = value[lastIndex].id;
                lastFetchedId = firstId;
                  console.log("Button lastFetchedID", firstId);
              }
            CreateMessages(value, currId);
            console.log("Sending message From button:", value);
            console.log("firstId from button ", firstId);
            // Scroll to the bottom of the chat box after adding the new message
            chatBox.scrollTop = chatBox.scrollHeight;
        }).catch();
        //resetScroll();
        //firstId = 512;
        log.innerHTML = "";
        clearTimeout(typingTimer); // Clear the previous timer
        isTyping = false; // Reset the typing flag
    });
    
    document.querySelector("#chat-input").addEventListener("keydown", function(event) {
        if (event.keyCode === 13) { // Send message on Enter keypress
            offset = 0;
            sendMsg(conn, rid, msg, 'msg');
            console.log("Sending message From Enter:", msg.value);
            firstId = firstId + 10;
            let resp = getData('http://localhost:8000/message?receiver=' + rid + '&firstId=512'  + '&offset=10');
            resp.then(value => {
                console.log("enter resp then =>", value);
                console.log("Enter value", value);
                if (value && value.length > 0) {
                    const lastIndex = value.length - 1;
                    firstId = value[lastIndex].id;
                    lastFetchedId = firstId;
                      console.log("Button lastFetchedID", firstId);
                  }
                CreateMessages(value, currId);
                console.log("Sending message From Enter:", value);
                console.log("firstId from enter", firstId);
                // Scroll to the bottom of the chat box after adding the new message
                chatBox.scrollTop = chatBox.scrollHeight;
            }).catch();
            log.innerHTML = "";
            clearTimeout(typingTimer); // Clear the previous timer
            isTyping = false; // Reset the typing flag
            offset += value.length;
        }
    });

        //var firstId = 69 ;
        var offset = 10; // Initialize the offset
        var currentScrollPos = 0; // Store the current scroll position
    
        var lastFetchedId = null; // Store the ID of the last fetched message
     
    
      
      // Create the debounced event handler
       debouncedScrollHandler = debounce(function() {
    
    
          console.log("Fetching more messages w/ scroll id",rid);
        if (chatBox.scrollTop === 0) {
          console.log("User has scrolled to the top, message ID is:", firstId);
    
          
      
          // User has scrolled to the top
          // Fetch more chat log history for the current receiver
          let resp = getData('http://localhost:8000/message?receiver=' + rid + '&firstId=' + firstId + '&offset=' + offset);
          resp.then(value => {
            // Process the retrieved chat log history
            console.log("scroll fetch messages", value);
            
            // Filter out messages with duplicate IDs
            value = value.filter(message => message.id !== lastFetchedId);
      
            if (value.length > 0) {
              const lastIndex = value.length - 1;
              firstId = value[lastIndex].id;
              lastFetchedId = firstId;
              console.log("debounce firstId", firstId);
              console.log("debounce lastFetchedId", lastFetchedId);
              console.log("debounce message log", value);
              console.log("debounce receiver ID", rid);
            }
            // Calculate current scroll position
            const currentScrollPos = chatBox.scrollHeight - chatBox.scrollTop;
            CreateMessages(value, currId);
    
            // Calculate new scroll position
          var newScrollPos = chatBox.scrollHeight - currentScrollPos;
          chatBox.scrollTop = newScrollPos;
      
            offset += value.length; // Increment the offset by 10
            //offset =+ 10;
          }).catch();
        }
      }, 300); // Adjust the debounce delay as needed (e.g., 300 milliseconds)
      
      // Attach the debounced event handler to the scroll event
         chatBox.addEventListener("scroll", debouncedScrollHandler);
    
    
            // Define the debounce function
            function debounce(func, delay) {
            let timer;
            return function() {
            clearTimeout(timer);
            timer = setTimeout(func, delay);
                };
            }
            
      

    if (data == null) {
        return;
    }

    CreateMessages(data, currId);
}


function animateDots(typingInterval) {
    var typingText = document.querySelector("#typing-text"); // Get the element with ID "typing-text"
    typingText.textContent = "is typing"; // Set the text content to "is typing"
    var dotsContainer = document.querySelector("#typing-dots"); // Get the element with ID "typing-dots"
    dotsContainer.innerHTML = "";
    var dotsCount = 1;
    var maxDots = 3;
    var dotsAnimationInterval = setInterval(function() {
        dotsContainer.innerHTML = ".".repeat(dotsCount);
        dotsCount++;
        if (dotsCount > maxDots) {
            dotsCount = 1;
        }
    }, 500);

    // Stop the dots animation after a certain duration
    setTimeout(function() {
        clearInterval(dotsAnimationInterval);
        typingText.textContent = ""; // Clear the typing notification after the animation ends
    }, typingInterval);
}

function sendTypingStatus(conn, receiverId, isTyping) {
    let typingData = {
        receiver_id: receiverId,
        is_typing: isTyping
    };

    conn.send(JSON.stringify(typingData));
    console.log("Sent typing status:", typingData);
}


// close chat
document.querySelector(".close-chat").addEventListener("click", function() {
    document.querySelector(".chat-wrapper").style.display = "none";
    console.log("closed chat");
    resetScroll();
});
// reset scroll variables and remove scroll event listener
function resetScroll() {
    var chatBox = document.querySelector(".chat");
  
    // Check if the chatBox element and debouncedScrollHandler function exist
    if (chatBox && typeof debouncedScrollHandler === "function") {
      // Remove the scroll event listener
      chatBox.removeEventListener("scroll", debouncedScrollHandler);
    }
        // Reset variables and scroll position
        firstId = 512;
        offset = 0;
        currentScrollPos = 0;
        lastFetchedId = null;
        value = null;
        closeChat = true;
}


        Øm  xØm'’   20240322073705-8l»m  µÎù&   http://localhost:8000/frontend/chat.js      ±/  var log = document.querySelector(".chat")

// function appendLog(container, msg, date) {
//     var doScroll = log.scrollTop > log.scrollHeight - log.clientHeight - 1;
//     log.prepend(container); // Prepend the container instead of appending
//     container.append(msg);
//     msg.append(date);
   
//     if (doScroll) {
//         log.scrollTop = log.scrollHeight - log.clientHeight;
//     }
// }

// 
function appendLog(container, msg, date, prepend = false) {
    var doScroll = log.scrollTop > log.scrollHeight - log.clientHeight - 1;
  
    if (prepend) {
      log.prepend(container); // Prepend the container instead of appending
    } else {
      log.appendChild(container); // Append the container
    }
    
    container.appendChild(msg);
    msg.appendChild(date);
    
    if (doScroll) {
      log.scrollTop = log.scrollHeight - log.clientHeight; // Scroll to the bottom of the chatbox
    }
  }
  


// Create messages from data and append to log container
function CreateMessages(data, currId) {
    data.reverse();

    //new addition 
    //log.innerHTML = "";
    
    // Iterate over the data in reverse order
    for (let i = data.length - 1; i >= 0; i--) {
      const { id, sender_id, content, date } = data[i];
  
      // Check if the message with the same ID already exists in the chatbox
      if (document.getElementById(`message-${id}`)) {
        continue; // Skip this message and move to the next iteration
      }
  
      // Create the message elements
      const receiverContainer = document.createElement("div");
      receiverContainer.className = sender_id == currId ? "sender-container" : "receiver-container";
      
      const receiver = document.createElement("div");
      receiver.className = sender_id == currId ? "sender" : "receiver";
      receiver.innerText = content;
  
      const messagedate = document.createElement("div");
      messagedate.className = "chat-time";
      messagedate.innerText = date.slice(0, -3);
  
      // Set a unique ID for each message element
      receiverContainer.id = `message-${id}`;
  
      // Append the message elements to the log container
      appendLog(receiverContainer, receiver, messagedate, true);
      //log.innerHTML = "";

        // Scroll to the bottom of the chat box after adding the new message
        chatBox.scrollTop = chatBox.scrollHeight;
      //firstId = id;
    }
  }
  
// Create users from data and append to users container
function sendMsg(conn, rid, msg, msg_type) {
    console.log("receiver ID from sendmsg:",rid)
    if (!conn) {
        return false;
    }
    console.log("Message input Value:", msg.value);
    if (!msg.value) {
        console.log("No message");
        return false;
    }
    console.log("Sending message to receiver ID:", rid);

    let msgData = {
        id: 0,
        sender_id: 0,
        receiver_id: rid,
        content: msg.value,
        date: '',
        msg_type: msg_type,
        is_typing: false
    }

    conn.send(JSON.stringify(msgData))
    msg.value = "";
    updateUsers()


    console.log("Message sent to receiver ID:", rid);
    //console.log("Message content:", msg.value);
    console.log("Message Data:", msgData.content);
    return false;
};

var chatBox = document.querySelector(".chat");

function OpenChat(rid, conn, data, currId, firstId) {
    document.getElementById('id' + rid).style.fontWeight = "400";

    for (var i = 0; i < unread.length; i++) {
        if (unread[i][0] == rid) {
            unread[i][1] = 0;
        }
    }

    let oldElem = document.querySelector(".send-wrapper");
    let newElem = oldElem.cloneNode(true);
    oldElem.parentNode.replaceChild(newElem, oldElem);

    document.querySelector(".chat-user-username").innerText = allUsers.filter(u => {
        return u.id == rid;
    })[0].username;
    document.querySelector(".chat-wrapper").style.display = "flex";
    var msg = document.getElementById("chat-input");

    log.innerHTML = "";
    

    var typingTimer;
    var typingInterval = 3000;
    var isTyping = false;

    document.querySelector("#chat-input").addEventListener("keydown", function(event) {
        // Add typing listener and send typing notification
        if (event.keyCode !== 13 && !isTyping) { // Ignore the Enter key and if already typing
            console.log("User started typing");
            isTyping = true;
    
            clearTimeout(typingTimer);
            typingTimer = setTimeout(function() {
                if (isTyping) {
                    console.log("User stopped typing");
                    sendTypingStatus(conn, rid, false); // Send typing status as false when stopped typing
                    isTyping = false;
                }
            }, typingInterval);
    
            sendTypingStatus(conn, rid, true); // Send typing status as true when started typing
            console.log("Sending typing status:", true);
        }
    });
    
    // Send message on button click or Enter keypress and fetch new messages
    document.querySelector("#send-btn").addEventListener("click", function() {
        sendMsg(conn, rid, msg, 'msg');
        offset = null;
        console.log("Sending message From button:", msg.value);
        firstId = firstId + 10;
        let resp = getData('http://localhost:8000/message?receiver=' + rid + '&firstId=512' + '&offset=10');
        resp.then(value => {
            console.log("enter resp then =>", value);
            console.log("Enter value", value);
            if (value && value.length > 0) {
                const lastIndex = value.length - 1;
                firstId = value[lastIndex].id;
                lastFetchedId = firstId;
                  console.log("Button lastFetchedID", firstId);
              }
            CreateMessages(value, currId);
            console.log("Sending message From button:", value);
            console.log("firstId from button ", firstId);
            // Scroll to the bottom of the chat box after adding the new message
            chatBox.scrollTop = chatBox.scrollHeight;
        }).catch();
        //resetScroll();
        //firstId = 512;
        log.innerHTML = "";
        clearTimeout(typingTimer); // Clear the previous timer
        isTyping = false; // Reset the typing flag
    });
    
    document.querySelector("#chat-input").addEventListener("keydown", function(event) {
        if (event.keyCode === 13) { // Send message on Enter keypress
            offset = 0;
            sendMsg(conn, rid, msg, 'msg');
            console.log("Sending message From Enter:", msg.value);
            firstId = firstId + 10;
            let resp = getData('http://localhost:8000/message?receiver=' + rid + '&firstId=512'  + '&offset=10');
            resp.then(value => {
                console.log("enter resp then =>", value);
                console.log("Enter value", value);
                if (value && value.length > 0) {
                    const lastIndex = value.length - 1;
                    firstId = value[lastIndex].id;
                    lastFetchedId = firstId;
                      console.log("Button lastFetchedID", firstId);
                  }
                CreateMessages(value, currId);
                console.log("Sending message From Enter:", value);
                console.log("firstId from enter", firstId);
                // Scroll to the bottom of the chat box after adding the new message
                chatBox.scrollTop = chatBox.scrollHeight;
            }).catch();
            log.innerHTML = "";
            clearTimeout(typingTimer); // Clear the previous timer
            isTyping = false; // Reset the typing flag
            offset += value.length;
        }
    });

        //var firstId = 69 ;
        var offset = 10; // Initialize the offset
        var currentScrollPos = 0; // Store the current scroll position
    
        var lastFetchedId = null; // Store the ID of the last fetched message
     
    
      
      // Create the debounced event handler
       debouncedScrollHandler = debounce(function() {
    
    
          console.log("Fetching more messages w/ scroll id",rid);
        if (chatBox.scrollTop === 0) {
          console.log("User has scrolled to the top, message ID is:", firstId);
    
          
      
          // User has scrolled to the top
          // Fetch more chat log history for the current receiver
          let resp = getData('http://localhost:8000/message?receiver=' + rid + '&firstId=' + firstId + '&offset=' + offset);
          resp.then(value => {
            // Process the retrieved chat log history
            console.log("scroll fetch messages", value);
            
            // Filter out messages with duplicate IDs
            value = value.filter(message => message.id !== lastFetchedId);
      
            if (value.length > 0) {
              const lastIndex = value.length - 1;
              firstId = value[lastIndex].id;
              lastFetchedId = firstId;
              console.log("debounce firstId", firstId);
              console.log("debounce lastFetchedId", lastFetchedId);
              console.log("debounce message log", value);
              console.log("debounce receiver ID", rid);
            }
            // Calculate current scroll position
            const currentScrollPos = chatBox.scrollHeight - chatBox.scrollTop;
            CreateMessages(value, currId);
    
            // Calculate new scroll position
          var newScrollPos = chatBox.scrollHeight - currentScrollPos;
          chatBox.scrollTop = newScrollPos;
      
            offset += value.length; // Increment the offset by 10
            //offset =+ 10;
          }).catch();
        }
      }, 300); // Adjust the debounce delay as needed (e.g., 300 milliseconds)
      
      // Attach the debounced event handler to the scroll event
         chatBox.addEventListener("scroll", debouncedScrollHandler);
    
    
            // Define the debounce function
            function debounce(func, delay) {
            let timer;
            return function() {
            clearTimeout(timer);
            timer = setTimeout(func, delay);
                };
            }
            
      

    if (data == null) {
        return;
    }

    CreateMessages(data, currId);
}


function animateDots(typingInterval) {
    var typingText = document.querySelector("#typing-text"); // Get the element with ID "typing-text"
    typingText.textContent = "is typing"; // Set the text content to "is typing"
    var dotsContainer = document.querySelector("#typing-dots"); // Get the element with ID "typing-dots"
    dotsContainer.innerHTML = "";
    var dotsCount = 1;
    var maxDots = 3;
    var dotsAnimationInterval = setInterval(function() {
        dotsContainer.innerHTML = ".".repeat(dotsCount);
        dotsCount++;
        if (dotsCount > maxDots) {
            dotsCount = 1;
        }
    }, 500);

    // Stop the dots animation after a certain duration
    setTimeout(function() {
        clearInterval(dotsAnimationInterval);
        typingText.textContent = ""; // Clear the typing notification after the animation ends
    }, typingInterval);
}

function sendTypingStatus(conn, receiverId, isTyping) {
    let typingData = {
        receiver_id: receiverId,
        is_typing: isTyping
    };

    conn.send(JSON.stringify(typingData));
    console.log("Sent typing status:", typingData);
}


// close chat
document.querySelector(".close-chat").addEventListener("click", function() {
    document.querySelector(".chat-wrapper").style.display = "none";
    console.log("closed chat");
    resetScroll();
});
// reset scroll variables and remove scroll event listener
function resetScroll() {
    var chatBox = document.querySelector(".chat");
  
    // Check if the chatBox element and debouncedScrollHandler function exist
    if (chatBox && typeof debouncedScrollHandler === "function") {
      // Remove the scroll event listener
      chatBox.removeEventListener("scroll", debouncedScrollHandler);
    }
        // Reset variables and scroll position
        firstId = 512;
        offset = 0;
        currentScrollPos = 0;
        lastFetchedId = null;
        value = null;
        closeChat = true;
}


Ó˜ÀÙ–   “         =Xû      log    ¸O€      document   Ø1:ò      querySelector      ßÿ/¤      .chat      «ÉM	      appendLog      -â
è	      container      ÿ?X‹      msg    õ£$      prepend    €„–b      doScroll	   “Gë	      scrollTop
      LsA¿      scrollHeight   Ëú¸      clientHeight   ­$~      appendChild    ‘ƒå      CreateMessages     6—(      data   d®™­      currId     Æe=?      reverse    Ò,‰+	      sender_id      4WÈ      content    tÇ£      getElementById     iNÌ      message-   ø…"      receiverContainer      DC      createElement      œ³æÙ      div    6CY>	      className      ´©Y      sender-container   åuóÌ      receiver-container     Ş&U      receiver   ¡"üÏ      sender     ­	v	      innerText      $È      messagedate    „÷è¡	      chat-time       Ø… Ì      slice!      Üê$      chatBox"    ƒYZ      sendMsg#    shş      conn$   ­UR½      rid%    S:      msg_type&   şQ1      console'    ÜÚÛ      receiver ID from sendmsg:(      øƒ;“      Message input Value:)   áEQ…
      No message*     HUvª      Sending message to receiver ID:+    ’pÎ‹      msgData,    ‰7´      receiver_id-    Ñ­ˆ°	      is_typing.      ü,¸      send/   n§ë	      stringify0      O,,      updateUsers1    ¹´A      Message sent to receiver ID:2   À±      Message Data:3      ;ÕÑN      OpenChat4   Z/|      firstId5    `×·×
      fontWeight6     éš­I      4007    [C-/      unread8     x«      oldElem9    záÔ¦      .send-wrapper:      rç^      newElem;    ›ƒÓg	      cloneNode<      ¥_ÏÓ
      parentNode=     ,[uh      replaceChild>   Ë-R	      .chat-user-username?    êO
a      allUsers@   >	Å      filterA     /©Â%      usernameB   uŸS      .chat-wrapperC      e}Ÿ      displayD     Õqî      flexE   Şû™
      chat-inputF     QÃ:	      innerHTMLG      XÜÎ      typingTimerH    N’@      typingIntervalI     |™Ğé      isTypingJ   ›.ï      #chat-inputK     rO      addEventListenerL   ºÓ      keydownM    II·P      eventN      ­5      keyCodeO    µ^¥¼      User started typingP    Qï8u      clearTimeoutQ   3AtÙ
      setTimeoutR     G.¥I      User stopped typingS    Æ¹ †      sendTypingStatusT   êÏ¤&      Sending typing status:U     ±Ò¥	      #send-btnV      ŸªâX      clickW      ;±ŞÀ      Sending message From button:X   æT»      respY   ÒÏŸ      getDataZ    ­„¿2'      http://localhost:8000/message?receiver=]    ¿€¤a      enter resp then =>^     3é      Enter value_    €şÕv      lastFetchedId`      ²½n—      Button lastFetchedIDa   ºØc       firstId from button b   Ê…1      Sending message From Enter:c    –f›„      firstId from enterd     ¼\J       currentScrollPose   âXO}      debouncedScrollHandlerf     ŠCÌq      debounceg   ¼ÎÔÍ#      Fetching more messages w/ scroll idh    ›P[5,      User has scrolled to the top, message ID is:i   J£ Â	      &firstId=j      &nAh      &offset=k   u*ô'      scroll fetch messagesl      ğß¸’      debounce firstIdm   ğ Aô      debounce lastFetchedIdn     åLA¾      debounce message logo   ²l      debounce receiver IDp   aÈ­Ÿ      newScrollPosq   \zû      scrollr     ÉÙfv      funcs   ‹C±À      delayt      ÅÒî      timeru      G¬\á      animateDotsv    ³xôÊ
      typingTextw      t@&      #typing-textx   bÈÅe      textContenty    øhï°	      is typingz      tàyã      dotsContainer{      ©x›      #typing-dots|   A	      dotsCount}      ©JêÕ      maxDots~    &Íç‘      dotsAnimationInterval      ìˆ       setInterval€    ıè½      repeat     bPk      clearInterval‚      Èzİ}
      receiverIdƒ     Ÿ3
      typingData„     ®}^Å      Sent typing status:…    ;´ U      .close-chat†    ,½      none‡   WúÏY      closed chatˆ    P¢=      resetScroll‰    ]ü      removeEventListenerŠ    z¦ŠÓ	      closeChat‹      Ù¿M      &firstId=512&offset=10Œ     şÒŸ
      OpenChat/<     ıİ%      OpenChat/</typingTimer<    ö88      OpenChat/</<   ¼¨FE       OpenChat/debouncedScrollHandler<   À7‚¾"      OpenChat/debouncedScrollHandler</<‘     …ÄÊ)      OpenChat/debouncedScrollHandler</</value<“      ¬T²x      OpenChat/debounce/<”    ÷x|*"      animateDots/dotsAnimationInterval<•     İv­      animateDots/<        *  %                 ï%,‰                                                                                                                                                                             	                
                                 	                 	                                  	                                             	                       	           
                                                         	                                                                                                                                                                         !                                                     ³OŒc	   	   	          "  !  3  u  S  ˆ                 V                                       i                 V                      #  $    %           +              $  P#  P    P4  Pi    PG  PH  PI  P `d  _  Pf           8  :               r  Ps  P          t  P                             u               M                                           X               *            1               M           X               *            1                           X              *  p            d               F            1               H  v  Pz  P|  P}  P~  P                                             #  ‚  I           ƒ                !                  ¯Â0°Iô$KE®úš   #         ,    V   %  -     
   ,  -  ‡&Õª!«!   ¸     i@Ï¸   m                         Ø   ¶   ¹	   ßI
   â   r È   İ¶   ¹	   ßI
   â   r È   İ¹	   ßI
   â   r ßI   â   l   v İ¤

`‘ 	P9j@le‘ 	P9€ B`‘ 	P7ÿÿÿæP4€ ZP€Œ  uØB|                       ¯°   °  °  °  İº  °   İº °  İº °  İº ß ™   –   İ–   °  İ¹   I   ¹   I   ¹   I   &&Ë  İ¼  ™#   –   ¹   ßI   â¼   v İ˜   –   ¹   ßI   â¼   v İ–   ¼   ßI   â¼  v İ¼  ßI   â¼  v İ¼  ™*   –   ¹   ¹   I   ¹   I   &K   İ–   ¤Æ `

“@	`.`ÿÿÿøP `ÿÿÿôPI	`ÿÿÿôP$`ÿÿÿôPD	`.`#–@P€€Œ     F   ¹ÿÿÿÿÿÿÿğ  ×{T°                  .      $º  ßI   âv  İ¯°   İº  I   &°   İ—   ¼   ™Ñ  –   ¯°  °  °  °  °  °  °  İº  ¼   JdßI   °  İßI   °  İßI   °  İßI   °  İİ¹	   ßI
   â   ¼  0%r ™   –   Ğ˜9  –   ¹	   ßI   â   r °  İ¼  ¼  º ™   –      ˜   –      –   K   İ¹	   ßI   â   r °  İ¼  ¼  º ™   –      ˜   –      –   K   İ¼  ¼  K   İ¹	   ßI   â   r °  İ¼     K   İ¼  ¼  ßI   âır K   İ¼     ¼  0%K   İ¹    ¼  ¼  ¼  v İ¹   ¹   I   K   İĞ–,   ¼   /(Ë   İ˜(şÿÿ–.   Ğ¤ `
PD
`f  0`¶@`ÿÿÿæP-	`K!`‘ 	P(`+­@`‘ 	P(`"­ `N`‘ 	P(`/`’ PI`	"L`

ÿÿÿâPD#	`›@+`–@&P€€€ğ  à        ø  ÿÿÿÿ   9   ²         ²                #   İ  D  pÖwé  Q                (      ¯°   İ¹   ßI   â   º v İº  š   –   £Ğ¤–   ¹   ßI   â   º I   v İº I   š#   –
   ¹   ßI   â   v İ£Ğ¤–   ¹   ßI   â   º v İ8	   ;
   ;   º ;   º I   ;      ;   º ;   ;   °   İº  ßI   â¹   ßI   â¼   r v İº    K   İ¹    v  İ¹   ßI   â   º v İ¹   ßI   â   ¼   I   v İ£Ğ¤Ğ¤ &`‘ (ÿÿÿàP$	`-	`1H`‘ $ÿÿÿäP$	`’ 	`‘ P$	`1H
`‘ /ÿÿÿÙPD`%	&	&	(	-	*	(	K`

ÿÿÿöPÿÿÿöP$`.`J`‘ ,ÿÿÿÜPD`‘ 	ÿÿÿëP$`T€€€D         P  ÿÿÿÿ    .              {              N         ä  oi[´  ˜  $      
       I      $»  Ì   İ» Ì   İ» Ì   İ» Ì   İ¯°  °  İl   Ë  İ¹   ßI   â   ¿   %r I      K   İË   İ—   ¼   ¹	   I
   ™I   –
   ¹	   ¼   JJ¿   ™   –   ¹	   ¼   JMİ–   ¼   /'Ë   İ˜§ÿÿÿ–   ¹   ßI   â   r °  İ¼  ßI   âr °  İ¼  I   ßI   â¼  ¼  v İ¹   ßI   â   r ¹   ßI   âl   r JI   K   İ¹   ßI   â   r I      K   İ¹   ßI   â   r Ì   İ¹      K   İ¸Ì   İÌ 	  İ¹   ßI   â   r ßI   â   l    v İ¹   ßI   â!   r ßI   â"   l#   v İ¹   ßI   â   r ßI   â   l$   v İ
Ì 
  İË  İÌ   İ¶%   ¼   l&   ,r È%   İ¹'   ßI   â(   ¹%   v İº ™   –G    £Ğ¤–G   ¹)    º ¿   v İĞ¤¤ #” `ÿÿÿêP“@
 `f• ` `“@(`•@	`‘ 	P(`P(`  	ÿÿÿêPD`‘ 	PAÿÿÿùP3-`‘ 	P“ `‘ 	PI`0 `)`G`‘ 	P9ÿÿÿäPD/`‘ 	P5ÿÿÿæPDK`‘ 	P9ÿÿÿäPDi`( `Fl`Gq`
"5€  ™Cq!PI€  œ
`‘ #ÿÿÿåPD€  ª	`/	`H€  ®`ÿÿÿùPP€ä  Ô     $   s  ÿÿÿÿ    ~                h   ^   <   ¸÷'«<                            º  I   ¿   ¡¤ 	`&Q€€€  Á q                            º  I   ›   –   İ¿ 	  –   ™y   –   ¹   ßI   â   v İÌ 	  İ¹    ¿   v İ¹    l   ¿   r Ì   İ¹    ¿   ¿   v İ¹   ßI   â	   v İ–   ¤@`– • `‘ P$`G`ÿÿÿÿP$`EEPI`ÿÿÿùP$`’ PIPˆ   ÂÑØkˆ   F                          ¿ 	  ™;   –   ¹   ßI   â   v İ¹    ¿   ¿   v İÌ 	  İ–   ¤ `/`‘ P$`ÿÿÿùP$`LP€€€H  wó Š8  ½                        ¯°   İ¹    ¿   ¿   ¿      v İÌ 
  İ¹   ßI   â   ¿   I   v İ¿   
%Ì   İ¹    	   ¿   %
   %r °   İ¼   ßI   âl   r ßI   âv  İ¹      K   İ¹    ¿   v İÌ 	  İĞ¤ &	`
ÿÿÿôP$	`'	`‘ ,
ÿÿÿÜP$	`.`,ÿÿÿÓP(	`
ÿÿÿûPJPD	` 	`ÿÿÿÿP$	`(P€H         ¼   ÿÿÿÿœ  JIĞ‡Œ                        ¹   ßI   â   º  v İ¹   ßI   â   º  v İº  ›   –   İº  I   –	   ™X   –
   ¯°   İº  I   &°   İº  ¼   JI   Ì   İ¿   Ì   İ¹   ßI   â   ¿   v İĞ–   ¹	    º  ¿   v İ¹   ßI   â
   º  v İ¹   ßI   â   ¿   v İ¹   ¹   I   K   İ¤ `‘ "ÿÿÿæP$`‘ ÿÿÿíP$`§ &#`/`“ `+`‘ $ÿÿÿäPJ	`ÿÿÿøP$`‘ ,ÿÿÿÜP$`‘ $ÿÿÿäPD`• 	P€œ     W   N   ÿÿÿÿ€  Ø<*p  î                       º  I   ™İ   –   ¯°   İÌ 
  İ¹    ¿   ¿   ¿      v İ¹   ßI   â   ¿   I   v İ¿   
%Ì   İ¹	    
   ¿   %   %r °   İ¼   ßI   âl   r ßI   âv  İ¹      K   İ¹    ¿   v İÌ 	  İ¿ 
  ¹   I   %-Ì 
  İĞ–   ¤ `• &`'`
ÿÿÿôP$`‘ +
ÿÿÿİP$`.`,ÿÿÿÓP(`
ÿÿÿûPJP$` `ÿÿÿÿP$`'`@P€        Ó   ÿÿÿÿœ  AøC-Œ                        ¹   ßI   â   º  v İ¹   ßI   â   º  v İº  ›   –   İº  I   –	   ™X   –
   ¯°   İº  I   &°   İº  ¼   JI   Ì   İ¿   Ì   İ¹   ßI   â   ¿   v İĞ–   ¹	    º  ¿   v İ¹   ßI   â
   º  v İ¹   ßI   â   ¿   v İ¹   ¹   I   K   İ¤ `‘ "ÿÿÿæP$`‘ ÿÿÿíP$`§ &'`/`“ `+`‘ $ÿÿÿäPJ	`ÿÿÿøP$`‘ +ÿÿÿİP$`‘ "ÿÿÿæPD`• P€œ     W   N   ÿÿÿÿ   öå‡  ¦                        ¹   ßI   â   ¿   v İ¹   I   ™z   –   ¯°   İ¹   ßI   â   ¿   v İ¹    	   ¿   %
   %¿   %   %¿ 
  %r °   İ¼   ßI   âl   r ßI   âv  İĞ–   ¤@`‘ 2ÿÿÿÖP$`– &`‘ <ÿÿÿÌPD`,ÿÿÿ¨P(`
ÿÿÿûPJ&PJ(P€      0   p   ÿÿÿÿ  Æq»gô  M                &      ¯°  İ¹   ßI   â   º  v İº  ßI   âl   r Ê  İº  I   ™¤   –   ¯°  İº  I   &°  İº  ¼  JI	   Ì   İ¿   Ì   İ¹   ßI   â
   ¿   v İ¹   ßI   â   ¿   v İ¹   ßI   â   º  v İ¹   ßI   â   ¿   v İĞ–   ¹   I   ¹   I   &°  İ¹    º  ¿   v İ¹   I   ¼  &Ë   İ¹   ¼   K   İ¿ 
  º  I   %-Ì 
  İĞ¤ 	F`‘ %ÿÿÿãPD`
ÿÿÿùPG`” &!`/`“ `+`‘  ÿÿÿèP$`‘ &ÿÿÿâP$`‘ $ÿÿÿäP$`‘ $ÿÿÿäPJ&`
 `ÿÿÿøPD`
*`O`–@P         L  ÿÿÿÿ   H   š       8   ¨5$8                            º  I   ¿   ¡ `€€€x   ˜EpõX   (                        »  Ì   İ» Ì   İÎ    ²   İl   £Ï¤Ï¤’ '`ETx            ÿÿÿÿ    %          l   M)Aúl   .                          ¹    ¿   ´   v İ¹    ¿  ¿  r Ì   İ¤ `
ÿÿÿÿP$`ÿÿÿïP)P€€è   Ç9Şè                            ¹   ßI   â   r Ì   İ¿      K   İ¹   ßI   â   r Ì   İ¿      K   İÌ   İÌ   İ¹	    l
   ôr Ì   İ¹    l   º  v İ¤ `‘ 	P)` `‘ 	P)` `'`(!`5C,PI`ECP4P€€€Œ   ß'7Œ   N                          ¿      ßI   â¿   r K   İ¿   /'Ì   İ¿   ¿   ™   –   Ì   İ–   ¤ 	`‘ %ÿÿÿùP)	`-` `LP€T   =×ì6T                              ¹    ¿   v İ¿      K   İ¤ 	`ÿÿÿÿP$	` P€¼   éq!]¬   \                       ¯°   İ8   º ;   º ;   °   İº  ßI   â¹   ßI   â¼   r v İ¹   ßI	   â
   ¼   v İĞ¤ &`%	(	M`

ÿÿÿöPÿÿÿöP$`‘ #ÿÿÿåPP¼          [   ÿÿÿÿ|   béy|   D                  
        ¹   ßI   â   r I      K   İ¹   ßI   â	   v İ¹
    v  İ¤ `‘ 	P“ `‘ P$`P€€€   »Õ—   ¬                         ¹   ßI   â   r Ë   İ¼   ›   –   İ¹      –   ™#   –   ¼   ßI   â   ¹   v İ–   ¶    È   İ¶	   È	   İ¶
   È
   İ¶   È   İ¶   È   İ¶   È   İ¤ `‘ 	PH	`›@` &ÿÿÿâPI		`.	`,	`,	`,	`,	`P€€€3õØ  `  `   	  
          `    `2    `     V                                !  
  	    `  `&     '  (  *  )  *     @   ,    ˆ   V   %  -  .  Y  /  0  1  2    `P  Q  
  `  `  p  `   `&     R  S    `N  &     O  P  Q    pS  T    `&     ]  ^  2    ` `    W  a  !  
  	    `  `"    &     W  *  Y  Z  ‹  ï  	  p;   ˆ   F  P    `&     ]  ^  2    ` `    b  c  !  
  	    `N    `"    &     b  *  Y  Z  ‹  ï    p;   ˆ   F  P  2    `   `  `&     k  @    p2    ` l  m  n  o  !  
  	      `&     g  !  	    `h  Y  Z  i  j  ï    p;     `	  `  p     é  6  5  7  2    9  ;  <  =  >  ?  @    pA    B  D  C  E     ˆ   F  J  K  L    pU  V    p
  pe    p!  q      `.  €  F     `  ˆ   x    `    w  y  x  {  ˆ   F      pQ    p!  `"  `  @,  -  .  Y  /  &     „  #  `      e  M  ‰  q  4    d  _  *  Š  $  `    B  é  †  C  &     ‡  ˆ     `  p  p  p  p  p  p  p         !  …  K  V    pÿX„                                               "      "         ¶   *   3         @              ! G   
   Œ        B              `      Œ        Q            ! €      Œ        q            ! §              •            ! “      ‘      ! =      f         :      “        è      u         à      ”        ä      •        õ      S                              ˆ         H©À      ±/      ±/                  ¬  •  š  •                 ë  X	  Ô  X	  #               ¤	  œ  ”	  œ  L             €à  (  Ï  (  o               ´  Ü  ´  Ü  |   O              9    9  ‰   O            k  x  c  x     .            Ø  y  Ğ  y     K             û  ©  û  ©  ¤              Ï    Ç    º   O            R  5  R  5  Á              i  Õ%  a  Õ%  à   2            E!  ¹%  E!  ¹%  ì               #"  J"  #"  J"  ñ   "          €ü&  ±'  ë&  ±'                >'  ¢'  6'  ¢'               €0(  ˆ+  (  ˆ+  !              å)  …*  İ)  …*  (  5             İ*  t+  Õ*  t+  1               £+  ~,  Š+  ~,  7              ×,  T-  Ï,  T-  C  I             ¦-  ®/  ’-  ®/  I             5¡İO‚ÀeXM$Ğ~      fÂfÂFÅÚ—fº1   T    O^partitionKey=%28http%2Clocalhost%2C8000%29,:http://localhost:8000/frontend/chat.js necko:classified 1 strongly-framed 1 request-method GET response-head HTTP/1.1 200 OK
Accept-Ranges: bytes
Content-Length: 12209
Content-Type: text/javascript; charset=utf-8
Last-Modified: Tue, 12 Mar 2024 17:30:21 GMT
Date: Thu, 11 Apr 2024 11:47:09 GMT
 original-response-headers Accept-Ranges: bytes
Content-Length: 12209
Content-Type: text/javascript; charset=utf-8
Last-Modified: Tue, 12 Mar 2024 17:30:21 GMT
Date: Thu, 11 Apr 2024 11:47:09 GMT
 ctid 2 uncompressed-len 0 net-response-time-onstart 14 net-response-time-onstop 14 alt-data 1;12209,javascript/moz-script-bytecode-20240322073705-8l alt-data-from-child 1    